name: backend
type: Load Balanced Web Service

http:
  path: '/'
  healthcheck:
    path: '/health'
    interval: 30s
    timeout: 5s
    healthy_threshold: 2
    unhealthy_threshold: 3

image:
  build: ../../backend/Dockerfile
  port: 8000

cpu: 256
memory: 512
count: 1

secrets:
  OPENAI_API_KEY: /copilot/${COPILOT_APPLICATION_NAME}/${COPILOT_ENVIRONMENT_NAME}/secrets/OPENAI_API_KEY
  DATABASE_URL: /copilot/${COPILOT_APPLICATION_NAME}/${COPILOT_ENVIRONMENT_NAME}/secrets/DATABASE_URL
